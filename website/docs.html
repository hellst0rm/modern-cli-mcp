<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation - Modern CLI MCP</title>
  <meta name="description" content="How to install and configure Modern CLI MCP">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@unocss/reset/tailwind.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/htmx.org@2.0.4"></script>
  <script src="https://unpkg.com/hyperscript.org@0.9.14"></script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
  <nav class="bg-gray-800 border-b border-gray-700">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <a href="index.html" class="text-xl font-bold text-cyan-400">Modern CLI MCP</a>
        <div class="flex gap-6">
          <a href="index.html" class="hover:text-cyan-400 transition">Home</a>
          <a href="tools.html" class="hover:text-cyan-400 transition">Tools</a>
          <a href="docs.html" class="text-cyan-400">Docs</a>
          <a href="https://github.com/NacoSolutions/modern-cli-mcp" class="hover:text-cyan-400 transition" target="_blank">GitHub</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="max-w-4xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Documentation</h1>

    <nav class="mb-12 p-4 bg-gray-800 rounded-lg">
      <h2 class="text-sm font-semibold text-gray-400 mb-2">On this page</h2>
      <ul class="space-y-1">
        <li><a href="#installation" class="hover:text-cyan-400">Installation</a></li>
        <li><a href="#configuration" class="hover:text-cyan-400">Configuration</a></li>
        <li><a href="#profiles" class="hover:text-cyan-400">Agent Profiles</a></li>
        <li><a href="#dynamic-toolsets" class="hover:text-cyan-400">Dynamic Toolsets</a></li>
        <li><a href="#agentignore" class="hover:text-cyan-400">.agentignore</a></li>
        <li><a href="#usage" class="hover:text-cyan-400">Usage</a></li>
        <li><a href="#environment" class="hover:text-cyan-400">Environment Variables</a></li>
      </ul>
    </nav>

    <section id="installation" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">Installation</h2>

      <p class="text-gray-400 mb-6">
        Two recommended options: <strong class="text-white">AppImage</strong> for any Linux system, or <strong class="text-white">Nix</strong> for reproducible builds.
      </p>

      <!-- AppImage -->
      <div class="bg-gray-800 p-6 rounded-lg mb-6 border-l-4 border-cyan-400">
        <h3 class="text-xl font-semibold mb-3 text-cyan-400">AppImage (Recommended for non-Nix users)</h3>
        <p class="text-gray-400 text-sm mb-3">Single portable executable with all 104+ CLI tools bundled. No dependencies required.</p>
        <pre class="bg-gray-900 p-4 rounded overflow-x-auto mb-3"><code># Install to /opt (recommended)
curl -fsSL https://github.com/NacoSolutions/modern-cli-mcp/releases/latest/download/modern-cli-mcp-x86_64.AppImage \
  -o /opt/modern-cli-mcp.AppImage
chmod +x /opt/modern-cli-mcp.AppImage</code></pre>
        <p class="text-gray-500 text-xs">Or download manually from <a href="https://github.com/NacoSolutions/modern-cli-mcp/releases" class="text-cyan-400 hover:underline">GitHub Releases</a></p>
      </div>

      <!-- Nix -->
      <div class="bg-gray-800 p-6 rounded-lg mb-6 border-l-4 border-cyan-400">
        <h3 class="text-xl font-semibold mb-3 text-cyan-400">Nix (Recommended for Nix users)</h3>
        <p class="text-gray-400 text-sm mb-3">
          Runs directly from GitHub or FlakeHub. Requires <a href="https://determinate.systems/nix-installer/" class="text-cyan-400 hover:underline">Nix with flakes</a>.
        </p>
        <pre class="bg-gray-900 p-4 rounded overflow-x-auto mb-3"><code># Run from GitHub (latest)
nix run github:NacoSolutions/modern-cli-mcp

# Run from FlakeHub (versioned)
nix run "https://flakehub.com/f/NacoSolutions/modern-cli-mcp/0.4.tar.gz"</code></pre>
      </div>

      <!-- Other options collapsed -->
      <details class="mb-4">
        <summary class="cursor-pointer text-gray-400 hover:text-cyan-400 font-semibold">Other installation methods</summary>
        <div class="mt-4 space-y-4 pl-4 border-l-2 border-gray-700">
          <div>
            <h4 class="font-semibold text-gray-300 mb-2">Add as flake input</h4>
            <pre class="bg-gray-800 p-4 rounded overflow-x-auto text-sm"><code># flake.nix
{
  inputs.modern-cli-mcp.url = "github:NacoSolutions/modern-cli-mcp";
  # or FlakeHub: "https://flakehub.com/f/NacoSolutions/modern-cli-mcp/*.tar.gz"
}</code></pre>
          </div>
          <div>
            <h4 class="font-semibold text-gray-300 mb-2">Classic Nix (no flakes)</h4>
            <pre class="bg-gray-800 p-4 rounded overflow-x-auto text-sm"><code>nix-build https://github.com/NacoSolutions/modern-cli-mcp/archive/main.tar.gz -A defaultNix.default
./result/bin/modern-cli-mcp</code></pre>
          </div>
          <div>
            <h4 class="font-semibold text-gray-300 mb-2">Cargo (tools not included)</h4>
            <p class="text-gray-500 text-sm mb-2">Server only. Requires all CLI tools installed separately in PATH.</p>
            <pre class="bg-gray-800 p-4 rounded overflow-x-auto text-sm"><code>cargo install --git https://github.com/NacoSolutions/modern-cli-mcp</code></pre>
          </div>
        </div>
      </details>
    </section>

    <section id="configuration" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">Configuration</h2>

      <p class="text-gray-400 mb-4">Add to your MCP client's config file:</p>

      <!-- Tabs for AppImage vs Nix -->
      <div class="mb-6">
        <div class="flex gap-2 mb-4">
          <button class="px-4 py-2 bg-cyan-600 rounded font-semibold text-sm" onclick="document.getElementById('config-appimage').classList.remove('hidden'); document.getElementById('config-nix').classList.add('hidden'); this.classList.add('bg-cyan-600'); this.nextElementSibling.classList.remove('bg-cyan-600'); this.nextElementSibling.classList.add('bg-gray-700');">AppImage</button>
          <button class="px-4 py-2 bg-gray-700 rounded font-semibold text-sm" onclick="document.getElementById('config-nix').classList.remove('hidden'); document.getElementById('config-appimage').classList.add('hidden'); this.classList.add('bg-cyan-600'); this.previousElementSibling.classList.remove('bg-cyan-600'); this.previousElementSibling.classList.add('bg-gray-700');">Nix</button>
        </div>

        <div id="config-appimage">
          <pre class="bg-gray-800 p-4 rounded overflow-x-auto"><code class="text-cyan-300">{
  "mcpServers": {
    "modern-cli": {
      "command": "/opt/modern-cli-mcp.AppImage",
      "args": []
    }
  }
}</code></pre>
        </div>

        <div id="config-nix" class="hidden">
          <pre class="bg-gray-800 p-4 rounded overflow-x-auto"><code class="text-cyan-300">{
  "mcpServers": {
    "modern-cli": {
      "command": "nix",
      "args": ["run", "github:NacoSolutions/modern-cli-mcp", "--"]
    }
  }
}</code></pre>
        </div>
      </div>

      <h3 class="text-xl font-semibold mb-2">Config File Locations</h3>
      <ul class="list-disc list-inside text-gray-400 space-y-1 mb-4">
        <li><code class="bg-gray-800 px-2 py-1 rounded">~/.claude/settings.json</code> — Claude Code</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">~/.config/claude/claude_desktop_config.json</code> — Claude Desktop</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">~/.cursor/mcp.json</code> — Cursor</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">~/.config/cline/mcp_settings.json</code> — Cline</li>
      </ul>
    </section>

    <section id="profiles" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">Agent Profiles</h2>

      <p class="text-gray-400 mb-4">
        Profiles pre-expand relevant tool groups for specific agent roles, reducing cognitive load and improving response latency.
        Use the <code class="bg-gray-800 px-2 py-1 rounded">--profile</code> flag to select a profile.
      </p>

      <h3 class="text-xl font-semibold mb-2">Usage</h3>
      <pre class="bg-gray-800 p-4 rounded overflow-x-auto mb-6"><code># Run with a specific profile
nix run github:NacoSolutions/modern-cli-mcp -- --profile explore

# List available profiles
nix run github:NacoSolutions/modern-cli-mcp -- --list-profiles

# List tool groups
nix run github:NacoSolutions/modern-cli-mcp -- --list-groups</code></pre>

      <h3 class="text-xl font-semibold mb-2">MCP Configuration with Profile</h3>
      <pre class="bg-gray-800 p-4 rounded overflow-x-auto mb-6"><code class="text-cyan-300">{
  "mcpServers": {
    "modern-cli": {
      "command": "nix",
      "args": ["run", "github:NacoSolutions/modern-cli-mcp", "--", "--profile", "explore"]
    }
  }
}</code></pre>

      <h3 class="text-xl font-semibold mb-3">Available Profiles</h3>
      <div class="space-y-3">
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">explore</code>
            <span class="text-xs text-gray-500">filesystem, search, git</span>
          </div>
          <p class="text-sm text-gray-400">Codebase discovery and exploration. Read-only focus for understanding project structure.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">architect</code>
            <span class="text-xs text-gray-500">filesystem, search, reference</span>
          </div>
          <p class="text-sm text-gray-400">System design and architecture planning. Access to docs and reference materials.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">review</code>
            <span class="text-xs text-gray-500">git, search, diff</span>
          </div>
          <p class="text-sm text-gray-400">Code review and quality analysis. Git diffs, search, and file comparison.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">generator</code>
            <span class="text-xs text-gray-500">file_ops, search, git, system</span>
          </div>
          <p class="text-sm text-gray-400">General task execution. Broadest access for typical development work.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">test</code>
            <span class="text-xs text-gray-500">file_ops, search, system</span>
          </div>
          <p class="text-sm text-gray-400">Test writing and execution. Shell access for running test suites.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">dev-deploy</code>
            <span class="text-xs text-gray-500">kubernetes, container, git, github</span>
          </div>
          <p class="text-sm text-gray-400">Container and Kubernetes deployment. CI/CD and infrastructure operations.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">api</code>
            <span class="text-xs text-gray-500">network, text, file_ops</span>
          </div>
          <p class="text-sm text-gray-400">API interaction and integration. HTTP requests, JSON/YAML processing.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded border-l-4 border-cyan-400">
          <div class="flex items-center justify-between mb-1">
            <code class="text-cyan-400 font-semibold">full</code>
            <span class="text-xs text-gray-500">all groups</span>
          </div>
          <p class="text-sm text-gray-400">All tools pre-expanded. Maximum capability, higher cognitive load.</p>
        </div>
      </div>

      <h3 class="text-xl font-semibold mb-2 mt-6">Tool Discovery</h3>
      <p class="text-gray-400 mb-3">Even with a limited profile, agents can discover additional tools:</p>
      <ul class="list-disc list-inside text-gray-400 space-y-1">
        <li><code class="bg-gray-800 px-2 py-1 rounded">list_tool_groups</code> — List all 15 tool groups with descriptions</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">expand_tools &lt;group&gt;</code> — Show all tools in a specific group</li>
      </ul>
    </section>

    <section id="dynamic-toolsets" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">Dynamic Toolsets (Beta)</h2>

      <p class="text-gray-400 mb-4">
        Start with minimal tools and enable groups on demand. Reduces cognitive load for AI agents by exposing only relevant tools.
      </p>

      <h3 class="text-xl font-semibold mb-2">Enable Dynamic Mode</h3>
      <pre class="bg-gray-800 p-4 rounded overflow-x-auto mb-6"><code class="text-cyan-300">{
  "mcpServers": {
    "modern-cli": {
      "command": "nix",
      "args": ["run", "github:NacoSolutions/modern-cli-mcp", "--", "--dynamic-toolsets"]
    }
  }
}</code></pre>

      <h3 class="text-xl font-semibold mb-2">Pre-enable Specific Toolsets</h3>
      <pre class="bg-gray-800 p-4 rounded overflow-x-auto mb-6"><code class="text-cyan-300">{
  "mcpServers": {
    "modern-cli": {
      "command": "nix",
      "args": ["run", "github:NacoSolutions/modern-cli-mcp", "--", "--dynamic-toolsets", "--toolsets=filesystem,git"]
    }
  }
}</code></pre>

      <h3 class="text-xl font-semibold mb-2">Meta-tools</h3>
      <p class="text-gray-400 mb-3">In dynamic mode, these tools are always available:</p>
      <ul class="list-disc list-inside text-gray-400 space-y-1 mb-4">
        <li><code class="bg-gray-800 px-2 py-1 rounded">list_available_toolsets</code> — Show all toolsets and their enabled status</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">get_toolset_tools</code> — Preview tools in a toolset before enabling</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">enable_toolset</code> — Activate a toolset (use "all" for everything)</li>
      </ul>

      <h3 class="text-xl font-semibold mb-2">Available Toolsets</h3>
      <div class="grid md:grid-cols-3 gap-3">
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">filesystem</code> <span class="text-gray-500 text-sm">eza, bat, fd, dust, duf, rip</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">file_ops</code> <span class="text-gray-500 text-sm">read, write, edit, patch</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">search</code> <span class="text-gray-500 text-sm">rg, fzf, ast-grep, web</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">text</code> <span class="text-gray-500 text-sm">jq, yq, sd, hck, miller</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">git</code> <span class="text-gray-500 text-sm">status, add, commit, branch</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">github</code> <span class="text-gray-500 text-sm">repo, issue, pr, release, api</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">gitlab</code> <span class="text-gray-500 text-sm">issue, mr, pipeline</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">kubernetes</code> <span class="text-gray-500 text-sm">kubectl, stern, helm</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">container</code> <span class="text-gray-500 text-sm">podman, dive, trivy</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">network</code> <span class="text-gray-500 text-sm">xh, usql, doggo</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">system</code> <span class="text-gray-500 text-sm">shell, nix_shell, procs</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">archive</code> <span class="text-gray-500 text-sm">compress, decompress, list</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">reference</code> <span class="text-gray-500 text-sm">tldr, navi, grex</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">diff</code> <span class="text-gray-500 text-sm">delta, difftastic</span></div>
        <div class="bg-gray-800 p-3 rounded"><code class="text-cyan-400">mcp</code> <span class="text-gray-500 text-sm">cache, tasks, context</span></div>
      </div>
    </section>

    <section id="agentignore" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">.agentignore</h2>

      <p class="text-gray-400 mb-4">
        Control which files AI agents can access using <code class="bg-gray-800 px-2 py-1 rounded">.agentignore</code> files.
        Uses gitignore syntax but operates independently—tools respect <code class="bg-gray-800 px-2 py-1 rounded">.agentignore</code> only, not <code class="bg-gray-800 px-2 py-1 rounded">.gitignore</code>.
      </p>

      <h3 class="text-xl font-semibold mb-2">Pattern Sources</h3>
      <p class="text-gray-400 mb-3">Patterns are loaded from (in order of precedence):</p>
      <ol class="list-decimal list-inside text-gray-400 mb-6 space-y-1">
        <li><code class="bg-gray-800 px-2 py-1 rounded">~/.config/agent/ignore</code> — Global patterns for all projects</li>
        <li><code class="bg-gray-800 px-2 py-1 rounded">.agentignore</code> — Per-directory patterns (walked up from working directory)</li>
      </ol>

      <h3 class="text-xl font-semibold mb-2">Example</h3>
      <pre class="bg-gray-800 p-4 rounded overflow-x-auto mb-6"><code class="text-gray-300"># Secrets and credentials
*.secret
.env*
secrets/
credentials.json

# Large generated files
node_modules/
target/
*.min.js

# Sensitive data
*.pem
*.key</code></pre>

      <h3 class="text-xl font-semibold mb-2">Behavior</h3>
      <ul class="list-disc list-inside text-gray-400 space-y-1">
        <li>Blocked paths return an error: <code class="bg-gray-800 px-2 py-1 rounded text-red-400">Path is blocked by .agentignore</code></li>
        <li>Search tools (fd, rg, ast-grep) automatically apply ignore patterns</li>
        <li>Patterns in child directories extend (not replace) parent patterns</li>
      </ul>
    </section>

    <section id="usage" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">Usage</h2>

      <p class="text-gray-400 mb-4">Once configured, the tools are available to your AI assistant. Example prompts:</p>

      <div class="space-y-4">
        <div class="bg-gray-800 p-4 rounded">
          <p class="text-gray-300 mb-2">"List files in the current directory with git status"</p>
          <p class="text-gray-500 text-sm">Uses: <code>eza</code></p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <p class="text-gray-300 mb-2">"Search for TODO comments in all Rust files"</p>
          <p class="text-gray-500 text-sm">Uses: <code>rg</code></p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <p class="text-gray-300 mb-2">"Show my open GitHub issues"</p>
          <p class="text-gray-500 text-sm">Uses: <code>gh_issue</code></p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <p class="text-gray-300 mb-2">"Get all pods in the production namespace"</p>
          <p class="text-gray-500 text-sm">Uses: <code>kubectl_get</code></p>
        </div>
      </div>
    </section>

    <section id="environment" class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-cyan-400">Environment Variables</h2>

      <table class="w-full bg-gray-800 rounded-lg overflow-hidden">
        <thead class="bg-gray-700">
          <tr>
            <th class="px-4 py-3 text-left">Variable</th>
            <th class="px-4 py-3 text-left">Description</th>
            <th class="px-4 py-3 text-left">Default</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-t border-gray-700">
            <td class="px-4 py-3"><code>MCP_DYNAMIC_TOOLSETS</code></td>
            <td class="px-4 py-3 text-gray-400">Enable dynamic toolsets mode</td>
            <td class="px-4 py-3 text-gray-400">false</td>
          </tr>
          <tr class="border-t border-gray-700">
            <td class="px-4 py-3"><code>MCP_TOOLSETS</code></td>
            <td class="px-4 py-3 text-gray-400">Comma-separated toolsets to pre-enable</td>
            <td class="px-4 py-3 text-gray-400">-</td>
          </tr>
          <tr class="border-t border-gray-700">
            <td class="px-4 py-3"><code>RUST_LOG</code></td>
            <td class="px-4 py-3 text-gray-400">Logging level</td>
            <td class="px-4 py-3 text-gray-400">info</td>
          </tr>
          <tr class="border-t border-gray-700">
            <td class="px-4 py-3"><code>GITHUB_TOKEN</code></td>
            <td class="px-4 py-3 text-gray-400">For GitHub CLI tools</td>
            <td class="px-4 py-3 text-gray-400">-</td>
          </tr>
          <tr class="border-t border-gray-700">
            <td class="px-4 py-3"><code>GITLAB_TOKEN</code></td>
            <td class="px-4 py-3 text-gray-400">For GitLab CLI tools</td>
            <td class="px-4 py-3 text-gray-400">-</td>
          </tr>
          <tr class="border-t border-gray-700">
            <td class="px-4 py-3"><code>KUBECONFIG</code></td>
            <td class="px-4 py-3 text-gray-400">Kubernetes config path</td>
            <td class="px-4 py-3 text-gray-400">~/.kube/config</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <footer class="bg-gray-800 border-t border-gray-700 mt-16 py-8">
    <div class="max-w-6xl mx-auto px-4 text-center text-gray-400">
      <p>MIT License &middot; <a href="https://github.com/NacoSolutions/modern-cli-mcp" class="hover:text-cyan-400">GitHub</a></p>
    </div>
  </footer>
</body>
</html>
